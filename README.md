# Backend-Developer-Challenge
Name: Tay Zhun Chong
Email: zhunchong87@gmail.com
Contact Number: 91825687

### Prerequisite
* Install MongoDB and start database with command "mongod", this will start the database on localhost port 27017
* npm -g install sails
* npm install

###The Challenge
#### Scraper
* Source of scrapping: http://www.myfitnesspal.com/food/calorie-chart-nutrition-facts #popular_tags
* To start scrapping, run command: node scraper.js
** If HTTP request timeout, the scraper will retry the request on the web page until it is successful.
** Duplicate checking done on food ID.
* To populate text index in MongoDB, run command: node indexdb.js

#### SailsJS (Endpoint API)
* Start sails with command "sails lift", this will start the web server on localhost port 1337
* Autocomplete API: 
** API Reference: GET http://localhost:1337/food/find?name={searchterm}
** Implemented a text index in MongoDB consisting of foodname and brand/company name.
** Only the top 10 results will be returned, sorted based on the textScore generated by text index.
* Retrieve nutritional values API:
** API Reference: GET http://localhost:1337/food/getNutrients?id={foodid}
** Make used of sails's waterline to query for a single record given the food id.
* Create new food item API:
** API Reference: POST http://localhost:1337/food/create
** Created a foodcollections model in Sails, defining the attributes used.
** Make used of Sails's waterline to create a new record in MongoDB.
** Changed the default behaviour of not respecting schema in foodcollections model from false to true, since I am using MongoDB. This is to avoid POST request from sending in data elements which the database does not respect. The food item creation API will only allow creation of attributes defined in the model.

###Things for Improvement
* Add in more advanced logic for to improve the Autocomplete. A possible way is to improve the text index residing in MongoDB.
* Add in custom validation logic in Sails model for food creation API to check whether the nutritional values schema matches those defined in the MongoDB Nutrients {} object. Current validation logic only checks if Nutrients is a valid object.
* Add pagination logic to the web scraper to mine for more food items.